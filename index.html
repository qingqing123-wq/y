<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/swiper.css">
    <script src="./js/swiper.min.js"></script>
    <script src="./js/doT.min.js"></script>
    <script src="./js/rem.js"></script>
    <script src="./js/jquery-3.5.1.min.js"></script>
    <script src="./js/touch-0.2.14.min.js"></script>
</head>

<body>
    <div class="box">
        <div class="xxw">
            <img src="./img/index/home-6.png" alt="">
            <span>我的</span>
            <span>音乐馆</span>
            <span>发现</span>
            <img src="./img/index/3@2x.png" alt="">
        </div>
        <div class="swiper-container">
            <div class="swiper-wrapper" id="ssadsdw">
                <!-- <div class="swiper-slide lunbo"><img src="./img/index/home-1.png" alt=""></div>
                <div class="swiper-slide lunbo"><img src="./img/index/home-2.jpg" alt=""></div>
                <div class="swiper-slide lunbo"><img src="./img/index/home-3.jpg" alt=""></div> -->
            </div>
            <!-- 如果需要分页器 -->
            <div class="swiper-pagination"></div>

        </div>

        <!-- <script language="javascript">
            let mySwiper = new Swiper('.swiper-container', {
                autoplay: true,
                loop: true,
                pagination: {
                    el: '.swiper-pagination',
                    dynamicBullets: true,
                },
            })

            //鼠标覆盖停止自动切换
            mySwiper.el.onmouseover = function () {
                mySwiper.autoplay.stop();
            }

            //鼠标离开开始自动切换
            mySwiper.el.onmouseout = function () {
                mySwiper.autoplay.start();
            }
        </script> -->

        <ul class="ul_1">
            <li>
                <img src="./img/index/4@2x.png" alt="">
                <p>歌手</p>
            </li>
            <li>
                <img src="./img/index/5@2x.png" alt="">
                <p>专辑 </p>
            </li>
            <li>
                <img src="./img/index/6@2x.png" alt="">
                <p> 排行</p>
            </li>
            <li>
                <img src="./img/index/7@2x.png" alt="">
                <p>电台 </p>
            </li>
            <li>
                <img src="./img/index/8@2x.png" alt="">
                <p>歌单 </p>
            </li>

        </ul>
        <div class="ssda">
            <span class="sssda">
                <a class="xssd">精选歌单</a>
                <a href="#" class="xssds" id="xssds">最新<img src="./img/index/9@2x.png" alt=""></a>
                <a href="#" class="xssdsd" id="xssdsd">推荐 <img src="./img/index/9@2x.png" alt="" hidden></a>
            </span>


            <!-- 图片的歌曲表单 -->
            <ul class="ul_ssd" id="uls">


            </ul>
            

            <script id="hot" type="text/x-dot-template">
                {{~it:value:index}}
                    <li>
                        <img src="{{=value.imgurl}}" alt="">
                        <p>{{=value.info}}</p>
                        <a href="#">{{=value.title}}</a>
                    </li>
                {{~}}
             </script>



             
            <!-- 轮播图 -->
            <script id="lun" type="text/x-dot-template">
            {{~ it:value:index}}
               <div class="swiper-slide"><img src={{=value}}></div>
            {{~ }}
           </script>




            <!-- <script>
                function ajax({
                    i = 'new'
                } = {}) {
                    let ajax_ = new XMLHttpRequest() || new ActiveXObject('Microsoft.XMLHTTP');
                    ajax_.open('get', 'http://192.168.1.53:3000/home?type=' + a, true);
                    ajax_.send();
                    ajax_.onreadystatechange = function () {
                        if (ajax_.readyState == 4) {
                            if (ajax_.status == 200) {
                                let [reg, data] = [JSON.parse(ajax_.responseText), doT.template(hot.innerText)];
                                uls.innerHTML = data(reg.musicList)

                            }
                        }
                    }
                }

                ajax();
            </script> -->





            <!-- 轮播图的ajax请求 -->
            <script>
                $.ajax({
                    url: "http://192.168.1.53:3000/home",
                    type: 'get',
                    data: {
                        type: 'banner',
                    },
                    success: function (res) {
                        console.log(res);
                        var dot_rem = doT.template(document.getElementById('lun').innerText);
                        ssadsdw.innerHTML = dot_rem(res.imglist);

                        var swiper1 = new Swiper('.swiper-container', {
                            autoplay: {
                                delay: 3000,
                            },
                            effect: 'slide',
                            pagination: {
                                el: '.swiper-pagination',
                            },
                        })

                    },
                    dataType: 'json',
                });
            </script>




            <!-- 歌曲列表的ajax请求 -->
            <script>
                $.ajax({
                    url: "http://192.168.1.53:3000/home",
                    type: 'get',
                    data: {
                        type: 'new',
                    },
                    success: function (res) {
                        console.log(res);
                        var dot_rem = doT.template(document.getElementById('hot').innerText);
                        uls.innerHTML = dot_rem(res.musicList);
                    },
                    dataType: 'json',
                });
            </script>
        </div>



        <!-- 音频的播放器 -->
        <div id="flexsda">
            <img src="./img/index/50@2x.png" alt="" style="height: .62rem;">
            <div class="pps">
                <p class="ww">TK from 凛として時雨 - unravel</p>
                <p class="dda">横滑可以切换上下首哦</p>
            </div>
            <audio>
                <source src="./TK from 凛として時雨 - unravel.mp3">
            </audio>
            <img src="./img/index/home-5.png" alt="" style="width: .44rem;height: .44rem; " id="imgsdwa">
            <img src="./img/index/home-4.png" alt="" style="width: .44rem;height: .44rem; " hidden id="imgsdawx">
            <img src="./img/index/home-6.png" alt="" style="width: .44rem;height: .44rem;">
        </div>
    </div>
</body>







<script>
    touch.on(xssds, 'tap', function () {
        $('#xssds img').show();
        $('#xssdsd img').hide()
        ajax();
    });
    touch.on(xssdsd, 'tap', function () {
        $('#xssds img').hide();
        $('#xssdsd img').show()
        ajax({
            i: 'recommend'
        });
    });
    let ssd = document.getElementsByTagName('audio')[0]
    touch.on(imgsdwa, 'tap', function () {
        ssd.play();
        $('#imgsdwa').hide();
        $('#imgsdawx').show();
    });
    touch.on(imgsdawx, 'tap', function () {
        ssd.pause();
        $('#imgsdwa').show();
        $('#imgsdawx').hide();
    });
</script>

</html>